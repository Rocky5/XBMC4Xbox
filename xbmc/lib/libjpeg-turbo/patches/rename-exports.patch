diff -wru src-orig/win/jconfig.h.in src/win/jconfig.h.in
--- src-orig/win/jconfig.h.in	2012-06-01 19:02:52 +0100
+++ src/win/jconfig.h.in	2012-06-01 19:12:47 +0100
@@ -32,3 +32,110 @@
 #undef RIGHT_SHIFT_IS_UNSIGNED
 
 #endif /* JPEG_INTERNALS */
+
+#define jcopy_block_row tb_jcopy_block_row
+#define jcopy_sample_rows tb_jcopy_sample_rows
+#define jdiv_round_up tb_jdiv_round_up
+#define jinit_1pass_quantizer tb_jinit_1pass_quantizer
+#define jinit_2pass_quantizer tb_jinit_2pass_quantizer
+#define jinit_c_coef_controller tb_jinit_c_coef_controller
+#define jinit_c_main_controller tb_jinit_c_main_controller
+#define jinit_c_master_control tb_jinit_c_master_control
+#define jinit_c_prep_controller tb_jinit_c_prep_controller
+#define jinit_color_converter tb_jinit_color_converter
+#define jinit_color_deconverter tb_jinit_color_deconverter
+#define jinit_compress_master tb_jinit_compress_master
+#define jinit_d_coef_controller tb_jinit_d_coef_controller
+#define jinit_d_main_controller tb_jinit_d_main_controller
+#define jinit_d_post_controller tb_jinit_d_post_controller
+#define jinit_downsampler tb_jinit_downsampler
+#define jinit_forward_dct tb_jinit_forward_dct
+#define jinit_huff_decoder tb_jinit_huff_decoder
+#define jinit_huff_encoder tb_jinit_huff_encoder
+#define jinit_input_controller tb_jinit_input_controller
+#define jinit_inverse_dct tb_jinit_inverse_dct
+#define jinit_marker_reader tb_jinit_marker_reader
+#define jinit_marker_writer tb_jinit_marker_writer
+#define jinit_master_decompress tb_jinit_master_decompress
+#define jinit_memory_mgr tb_jinit_memory_mgr
+#define jinit_merged_upsampler tb_jinit_merged_upsampler
+#define jinit_phuff_decoder tb_jinit_phuff_decoder
+#define jinit_phuff_encoder tb_jinit_phuff_encoder
+#define jinit_upsampler tb_jinit_upsampler
+#define jpeg_CreateCompress tb_jpeg_CreateCompress
+#define jpeg_CreateDecompress tb_jpeg_CreateDecompress
+#define jpeg_abort tb_jpeg_abort
+#define jpeg_abort_compress tb_jpeg_abort_compress
+#define jpeg_abort_decompress tb_jpeg_abort_decompress
+#define jpeg_add_quant_table tb_jpeg_add_quant_table
+#define jpeg_alloc_huff_table tb_jpeg_alloc_huff_table
+#define jpeg_alloc_quant_table tb_jpeg_alloc_quant_table
+#define jpeg_calc_jpeg_dimensions tb_jpeg_calc_jpeg_dimensions
+#define jpeg_calc_output_dimensions tb_jpeg_calc_output_dimensions
+#define jpeg_consume_input tb_jpeg_consume_input
+#define jpeg_copy_critical_parameters tb_jpeg_copy_critical_parameters
+#define jpeg_core_output_dimensions tb_jpeg_core_output_dimensions
+#define jpeg_default_colorspace tb_jpeg_default_colorspace
+#define jpeg_default_qtables tb_jpeg_default_qtables
+#define jpeg_destroy tb_jpeg_destroy
+#define jpeg_destroy_compress tb_jpeg_destroy_compress
+#define jpeg_destroy_decompress tb_jpeg_destroy_decompress
+#define jpeg_fdct_float tb_jpeg_fdct_float
+#define jpeg_fdct_ifast tb_jpeg_fdct_ifast
+#define jpeg_fdct_islow tb_jpeg_fdct_islow
+#define jpeg_fill_bit_buffer tb_jpeg_fill_bit_buffer
+#define jpeg_finish_compress tb_jpeg_finish_compress
+#define jpeg_finish_decompress tb_jpeg_finish_decompress
+#define jpeg_finish_output tb_jpeg_finish_output
+#define jpeg_free_large tb_jpeg_free_large
+#define jpeg_free_small tb_jpeg_free_small
+#define jpeg_gen_optimal_table tb_jpeg_gen_optimal_table
+#define jpeg_get_large tb_jpeg_get_large
+#define jpeg_get_small tb_jpeg_get_small
+#define jpeg_has_multiple_scans tb_jpeg_has_multiple_scans
+#define jpeg_huff_decode tb_jpeg_huff_decode
+#define jpeg_idct_1x1 tb_jpeg_idct_1x1
+#define jpeg_idct_2x2 tb_jpeg_idct_2x2
+#define jpeg_idct_4x4 tb_jpeg_idct_4x4
+#define jpeg_idct_float tb_jpeg_idct_float
+#define jpeg_idct_ifast tb_jpeg_idct_ifast
+#define jpeg_idct_islow tb_jpeg_idct_islow
+#define jpeg_input_complete tb_jpeg_input_complete
+#define jpeg_make_c_derived_tbl tb_jpeg_make_c_derived_tbl
+#define jpeg_make_d_derived_tbl tb_jpeg_make_d_derived_tbl
+#define jpeg_mem_available tb_jpeg_mem_available
+#define jpeg_mem_dest tb_jpeg_mem_dest
+#define jpeg_mem_init tb_jpeg_mem_init
+#define jpeg_mem_src tb_jpeg_mem_src
+#define jpeg_mem_term tb_jpeg_mem_term
+#define jpeg_new_colormap tb_jpeg_new_colormap
+#define jpeg_open_backing_store tb_jpeg_open_backing_store
+#define jpeg_quality_scaling tb_jpeg_quality_scaling
+#define jpeg_read_coefficients tb_jpeg_read_coefficients
+#define jpeg_read_header tb_jpeg_read_header
+#define jpeg_read_raw_data tb_jpeg_read_raw_data
+#define jpeg_read_scanlines tb_jpeg_read_scanlines
+#define jpeg_resync_to_restart tb_jpeg_resync_to_restart
+#define jpeg_save_markers tb_jpeg_save_markers
+#define jpeg_set_colorspace tb_jpeg_set_colorspace
+#define jpeg_set_defaults tb_jpeg_set_defaults
+#define jpeg_set_linear_quality tb_jpeg_set_linear_quality
+#define jpeg_set_marker_processor tb_jpeg_set_marker_processor
+#define jpeg_set_quality tb_jpeg_set_quality
+#define jpeg_simple_progression tb_jpeg_simple_progression
+#define jpeg_start_compress tb_jpeg_start_compress
+#define jpeg_start_decompress tb_jpeg_start_decompress
+#define jpeg_start_output tb_jpeg_start_output
+#define jpeg_std_error tb_jpeg_std_error
+#define jpeg_stdio_dest tb_jpeg_stdio_dest
+#define jpeg_stdio_src tb_jpeg_stdio_src
+#define jpeg_suppress_tables tb_jpeg_suppress_tables
+#define jpeg_write_coefficients tb_jpeg_write_coefficients
+#define jpeg_write_m_byte tb_jpeg_write_m_byte
+#define jpeg_write_m_header tb_jpeg_write_m_header
+#define jpeg_write_marker tb_jpeg_write_marker
+#define jpeg_write_raw_data tb_jpeg_write_raw_data
+#define jpeg_write_scanlines tb_jpeg_write_scanlines
+#define jpeg_write_tables tb_jpeg_write_tables
+#define jround_up tb_jround_up
+#define jzero_far tb_jzero_far
diff -wru src-orig/win/jpeg8.def src/win/jpeg8.def
--- src-orig/win/jpeg8.def	2012-06-01 19:02:52 +0100
+++ src/win/jpeg8.def	2012-06-01 19:08:39 +0100
@@ -1,107 +1,107 @@
 EXPORTS
-	jcopy_block_row @ 1 ; 
-	jcopy_sample_rows @ 2 ; 
-	jdiv_round_up @ 3 ; 
-	jinit_1pass_quantizer @ 4 ; 
-	jinit_2pass_quantizer @ 5 ; 
-	jinit_c_coef_controller @ 6 ; 
-	jinit_c_main_controller @ 7 ; 
-	jinit_c_master_control @ 8 ; 
-	jinit_c_prep_controller @ 9 ; 
-	jinit_color_converter @ 10 ; 
-	jinit_color_deconverter @ 11 ; 
-	jinit_compress_master @ 12 ; 
-	jinit_d_coef_controller @ 13 ; 
-	jinit_d_main_controller @ 14 ; 
-	jinit_d_post_controller @ 15 ; 
-	jinit_downsampler @ 16 ; 
-	jinit_forward_dct @ 17 ; 
-	jinit_huff_decoder @ 18 ; 
-	jinit_huff_encoder @ 19 ; 
-	jinit_input_controller @ 20 ; 
-	jinit_inverse_dct @ 21 ; 
-	jinit_marker_reader @ 22 ; 
-	jinit_marker_writer @ 23 ; 
-	jinit_master_decompress @ 24 ; 
-	jinit_memory_mgr @ 25 ; 
-	jinit_merged_upsampler @ 26 ; 
-	jinit_phuff_decoder @ 27 ; 
-	jinit_phuff_encoder @ 28 ; 
-	jinit_upsampler @ 29 ; 
-	jpeg_CreateCompress @ 30 ; 
-	jpeg_CreateDecompress @ 31 ; 
-	jpeg_abort @ 32 ; 
-	jpeg_abort_compress @ 33 ; 
-	jpeg_abort_decompress @ 34 ; 
-	jpeg_add_quant_table @ 35 ; 
-	jpeg_alloc_huff_table @ 36 ; 
-	jpeg_alloc_quant_table @ 37 ; 
-	jpeg_calc_jpeg_dimensions @ 38 ; 
-	jpeg_calc_output_dimensions @ 39 ; 
-	jpeg_consume_input @ 40 ; 
-	jpeg_copy_critical_parameters @ 41 ; 
-	jpeg_core_output_dimensions @ 42 ; 
-	jpeg_default_colorspace @ 43 ; 
-	jpeg_default_qtables @ 44 ;
-	jpeg_destroy @ 45 ; 
-	jpeg_destroy_compress @ 46 ; 
-	jpeg_destroy_decompress @ 47 ; 
-	jpeg_fdct_float @ 48 ; 
-	jpeg_fdct_ifast @ 49 ; 
-	jpeg_fdct_islow @ 50 ; 
-	jpeg_fill_bit_buffer @ 51 ; 
-	jpeg_finish_compress @ 52 ; 
-	jpeg_finish_decompress @ 53 ; 
-	jpeg_finish_output @ 54 ; 
-	jpeg_free_large @ 55 ; 
-	jpeg_free_small @ 56 ; 
-	jpeg_gen_optimal_table @ 57 ; 
-	jpeg_get_large @ 58 ; 
-	jpeg_get_small @ 59 ; 
-	jpeg_has_multiple_scans @ 60 ; 
-	jpeg_huff_decode @ 61 ; 
-	jpeg_idct_1x1 @ 62 ; 
-	jpeg_idct_2x2 @ 63 ; 
-	jpeg_idct_4x4 @ 64 ; 
-	jpeg_idct_float @ 65 ; 
-	jpeg_idct_ifast @ 66 ; 
-	jpeg_idct_islow @ 67 ; 
-	jpeg_input_complete @ 68 ; 
-	jpeg_make_c_derived_tbl @ 69 ; 
-	jpeg_make_d_derived_tbl @ 70 ; 
-	jpeg_mem_available @ 71 ; 
-	jpeg_mem_dest @ 72 ;
-	jpeg_mem_init @ 73 ; 
-	jpeg_mem_src @ 74 ;
-	jpeg_mem_term @ 75 ; 
-	jpeg_new_colormap @ 76 ; 
-	jpeg_open_backing_store @ 77 ; 
-	jpeg_quality_scaling @ 78 ; 
-	jpeg_read_coefficients @ 79 ; 
-	jpeg_read_header @ 80 ; 
-	jpeg_read_raw_data @ 81 ; 
-	jpeg_read_scanlines @ 82 ; 
-	jpeg_resync_to_restart @ 83 ; 
-	jpeg_save_markers @ 84 ; 
-	jpeg_set_colorspace @ 85 ; 
-	jpeg_set_defaults @ 86 ; 
-	jpeg_set_linear_quality @ 87 ; 
-	jpeg_set_marker_processor @ 88 ; 
-	jpeg_set_quality @ 89 ; 
-	jpeg_simple_progression @ 90 ; 
-	jpeg_start_compress @ 91 ; 
-	jpeg_start_decompress @ 92 ; 
-	jpeg_start_output @ 93 ; 
-	jpeg_std_error @ 94 ; 
-	jpeg_stdio_dest @ 95 ; 
-	jpeg_stdio_src @ 96 ; 
-	jpeg_suppress_tables @ 97 ; 
-	jpeg_write_coefficients @ 98 ; 
-	jpeg_write_m_byte @ 99 ; 
-	jpeg_write_m_header @ 100 ; 
-	jpeg_write_marker @ 101 ; 
-	jpeg_write_raw_data @ 102 ; 
-	jpeg_write_scanlines @ 103 ; 
-	jpeg_write_tables @ 104 ; 
-	jround_up @ 105 ; 
-	jzero_far @ 106 ; 
+	tb_jcopy_block_row @ 1 ; 
+	tb_jcopy_sample_rows @ 2 ; 
+	tb_jdiv_round_up @ 3 ; 
+	tb_jinit_1pass_quantizer @ 4 ; 
+	tb_jinit_2pass_quantizer @ 5 ; 
+	tb_jinit_c_coef_controller @ 6 ; 
+	tb_jinit_c_main_controller @ 7 ; 
+	tb_jinit_c_master_control @ 8 ; 
+	tb_jinit_c_prep_controller @ 9 ; 
+	tb_jinit_color_converter @ 10 ; 
+	tb_jinit_color_deconverter @ 11 ; 
+	tb_jinit_compress_master @ 12 ; 
+	tb_jinit_d_coef_controller @ 13 ; 
+	tb_jinit_d_main_controller @ 14 ; 
+	tb_jinit_d_post_controller @ 15 ; 
+	tb_jinit_downsampler @ 16 ; 
+	tb_jinit_forward_dct @ 17 ; 
+	tb_jinit_huff_decoder @ 18 ; 
+	tb_jinit_huff_encoder @ 19 ; 
+	tb_jinit_input_controller @ 20 ; 
+	tb_jinit_inverse_dct @ 21 ; 
+	tb_jinit_marker_reader @ 22 ; 
+	tb_jinit_marker_writer @ 23 ; 
+	tb_jinit_master_decompress @ 24 ; 
+	tb_jinit_memory_mgr @ 25 ; 
+	tb_jinit_merged_upsampler @ 26 ; 
+	tb_jinit_phuff_decoder @ 27 ; 
+	tb_jinit_phuff_encoder @ 28 ; 
+	tb_jinit_upsampler @ 29 ; 
+	tb_jpeg_CreateCompress @ 30 ; 
+	tb_jpeg_CreateDecompress @ 31 ; 
+	tb_jpeg_abort @ 32 ; 
+	tb_jpeg_abort_compress @ 33 ; 
+	tb_jpeg_abort_decompress @ 34 ; 
+	tb_jpeg_add_quant_table @ 35 ; 
+	tb_jpeg_alloc_huff_table @ 36 ; 
+	tb_jpeg_alloc_quant_table @ 37 ; 
+	tb_jpeg_calc_jpeg_dimensions @ 38 ; 
+	tb_jpeg_calc_output_dimensions @ 39 ; 
+	tb_jpeg_consume_input @ 40 ; 
+	tb_jpeg_copy_critical_parameters @ 41 ; 
+	tb_jpeg_core_output_dimensions @ 42 ; 
+	tb_jpeg_default_colorspace @ 43 ; 
+	tb_jpeg_default_qtables @ 44 ;
+	tb_jpeg_destroy @ 45 ; 
+	tb_jpeg_destroy_compress @ 46 ; 
+	tb_jpeg_destroy_decompress @ 47 ; 
+	tb_jpeg_fdct_float @ 48 ; 
+	tb_jpeg_fdct_ifast @ 49 ; 
+	tb_jpeg_fdct_islow @ 50 ; 
+	tb_jpeg_fill_bit_buffer @ 51 ; 
+	tb_jpeg_finish_compress @ 52 ; 
+	tb_jpeg_finish_decompress @ 53 ; 
+	tb_jpeg_finish_output @ 54 ; 
+	tb_jpeg_free_large @ 55 ; 
+	tb_jpeg_free_small @ 56 ; 
+	tb_jpeg_gen_optimal_table @ 57 ; 
+	tb_jpeg_get_large @ 58 ; 
+	tb_jpeg_get_small @ 59 ; 
+	tb_jpeg_has_multiple_scans @ 60 ; 
+	tb_jpeg_huff_decode @ 61 ; 
+	tb_jpeg_idct_1x1 @ 62 ; 
+	tb_jpeg_idct_2x2 @ 63 ; 
+	tb_jpeg_idct_4x4 @ 64 ; 
+	tb_jpeg_idct_float @ 65 ; 
+	tb_jpeg_idct_ifast @ 66 ; 
+	tb_jpeg_idct_islow @ 67 ; 
+	tb_jpeg_input_complete @ 68 ; 
+	tb_jpeg_make_c_derived_tbl @ 69 ; 
+	tb_jpeg_make_d_derived_tbl @ 70 ; 
+	tb_jpeg_mem_available @ 71 ; 
+	tb_jpeg_mem_dest @ 72 ;
+	tb_jpeg_mem_init @ 73 ; 
+	tb_jpeg_mem_src @ 74 ;
+	tb_jpeg_mem_term @ 75 ; 
+	tb_jpeg_new_colormap @ 76 ; 
+	tb_jpeg_open_backing_store @ 77 ; 
+	tb_jpeg_quality_scaling @ 78 ; 
+	tb_jpeg_read_coefficients @ 79 ; 
+	tb_jpeg_read_header @ 80 ; 
+	tb_jpeg_read_raw_data @ 81 ; 
+	tb_jpeg_read_scanlines @ 82 ; 
+	tb_jpeg_resync_to_restart @ 83 ; 
+	tb_jpeg_save_markers @ 84 ; 
+	tb_jpeg_set_colorspace @ 85 ; 
+	tb_jpeg_set_defaults @ 86 ; 
+	tb_jpeg_set_linear_quality @ 87 ; 
+	tb_jpeg_set_marker_processor @ 88 ; 
+	tb_jpeg_set_quality @ 89 ; 
+	tb_jpeg_simple_progression @ 90 ; 
+	tb_jpeg_start_compress @ 91 ; 
+	tb_jpeg_start_decompress @ 92 ; 
+	tb_jpeg_start_output @ 93 ; 
+	tb_jpeg_std_error @ 94 ; 
+	tb_jpeg_stdio_dest @ 95 ; 
+	tb_jpeg_stdio_src @ 96 ; 
+	tb_jpeg_suppress_tables @ 97 ; 
+	tb_jpeg_write_coefficients @ 98 ; 
+	tb_jpeg_write_m_byte @ 99 ; 
+	tb_jpeg_write_m_header @ 100 ; 
+	tb_jpeg_write_marker @ 101 ; 
+	tb_jpeg_write_raw_data @ 102 ; 
+	tb_jpeg_write_scanlines @ 103 ; 
+	tb_jpeg_write_tables @ 104 ; 
+	tb_jround_up @ 105 ; 
+	tb_jzero_far @ 106 ; 
Only in src/win: l1.txt
